(function(t){"use strict";t.fn.fbStarter=function(e){var i=t.extend({appId:"",pageId:"",status:!0,cookie:!0,xfbml:!0,locales:"en_US",canvasUrl:"",frictionlessRequests:!0,autoResize:!0,activeFangate:!1,likedPage:"like-wrapper",unlikePage:"unlike-wrapper",permissionsSuccess:function(){},permissionsFail:function(){},dialogSuccess:function(){},dialogFail:function(){}},e);if(window.fbInit=window.fbInit||!1,window.fbInit)return t(document).trigger("fb:initialized"),i.xfbml&&FB.XFBML.parse(),void 0;window.fbAsyncInit=function(){window.fbInit=!0,t(document).trigger("fb:initializing"),FB.init(i),t(document).trigger("fb:initialized"),i.autoResize===!0&&FB.Canvas.setDoneLoading(function(){FB.Canvas.setSize({height:600}),setTimeout(function(){FB.Canvas.setAutoGrow()},300)}),i.activeFangate&&FB.getLoginStatus(function(e){if("connected"===e.status){var n=e.authResponse.userID,a=i.pageId,s="SELECT uid FROM page_fan WHERE page_id ="+a+" and uid="+n,o=FB.Data.query(s);o.wait(function(e){1===e.length&&e[0].uid===n?t("#"+i.likedPage).show():t("#"+i.unlikePage).show()})}else t("#"+i.askPermission).show()})};var n="fb-root";if(!document.getElementById(n)){var a=document.createElement("div");a.id=n,document.body.appendChild(a)}var s,o="facebook-jssdk";return document.getElementById(o)||(s=document.createElement("script"),s.id=o,s.async=!0,s.src="//connect.facebook.net/"+i.locales+"/all.js",document.getElementsByTagName("head")[0].appendChild(s)),this.each(function(){function e(){FB.ui({method:"pagetab",redirect_uri:i.canvasUrl+"install_to_page.html"},function(e){null!==e&&null!==e.tabs_added?t.each(e.tabs_added,function(e){FB.api(e,function(){t("#msg").text("Your tab has already been installed")})}):t("#msg").text("Action cancelled, unable to install a page")})}function n(e){FB.login(function(e){e.authResponse?t.isFunction(i.permissionsSuccess)&&i.permissionsSuccess.call(this):t.isFunction(i.permissionsFail)&&i.permissionsFail.call(this)},{scope:e})}function a(e){FB.ui(e,function(e){e&&e.post_id?t.isFunction(i.dialogSuccess)&&i.dialogSuccess.call(this):t.isFunction(i.dialogFail)&&i.dialogFail.call(this)})}function s(e,i){FB.Canvas.getPageInfo(function(n){t({y:n.scrollTop}).animate({y:e},{duration:i,step:function(t){FB.Canvas.scrollTo(0,t)}})})}function o(t){FB.Canvas.setSize({width:810,height:t})}function c(){FB.Canvas.setDoneLoading(function(){FB.Canvas.setSize({height:600}),setTimeout(function(){FB.Canvas.setAutoGrow()},300)})}t(".fb-dialog").on("click",function(i){i.preventDefault();var s,o=t(this).data("fbactiontype");switch(o){case"add_page_tab":e();break;case"permissions":var c=t(this).data("permissions");n(c);break;case"share":s={method:"feed",link:t(this).data("link"),picture:t(this).data("picture"),title:t(this).data("title"),caption:t(this).data("caption"),description:t(this).data("description")},a(s);break;case"requests":s={method:"apprequests",message:t(this).data("message")},a(s);break;case"send":s={method:"send",name:t(this).data("name"),picture:t(this).data("picture"),link:t(this).data("link")},a(s)}}),t(".fb-scrollto").on("click",function(e){e.preventDefault(e);var i=t(this).data("offset"),n=t(this).data("speed");s(i,n)}),t.fn.fbStarter.externalScrollto=function(t,e){s(t,e)},t(".fb-setsize").on("click",function(e){e.preventDefault(e);var i=t(this).data("height");o(i)}),t.fn.fbStarter.externalSetsize=function(t){o(t)},t(".fb-autoresize").on("click",function(t){t.preventDefault(t),c()}),t.fn.fbStarter.externalAutoresize=function(){c()}})}})(jQuery);